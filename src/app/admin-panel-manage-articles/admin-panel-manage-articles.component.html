<main>
    <div class="title-section">
        <a class="button gray" routerLink="/admin">Back</a>
        <span class="title">Admin panel - Manage articles</span>
        <a (click)="showNewArticleModal()" class="button">New</a>
    </div>
    <div class="sections-container">
        <section class="no-padding">
            <div class="table__wrapper">
                <table *ngIf="articles$">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Author</th>
                            <th>Title</th>
                            <th>Language</th>
                            <th>Status</th>
                            <th>PublishDate</th>
                            <th>LastChangeDate</th>
                            <th>Original Id</th>
                            <th style="text-align: center;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let article of articles$ | async">
                            <td>{{ article.id }}</td>
                            <td>{{ article.authorId | author | async }}</td>
                            <td>{{ article.title | truncate: 20 }}</td>
                            <td>{{ article.language | langCode }}</td>
                            <td>{{ article.status | statusCode }}</td>
                            <td>{{ article.publishDate | date: "MMM dd yyyy hh:mm:ss" }}</td>
                            <td>{{ article.lastChangeDate | date: "MM/dd/yyyy hh:mm:ss" }}</td>
                            <td>{{ article.originalId }}</td>
                            <td class="actions">
                                <a routerLink="/article/{{ article.language | langCode }}/{{ article.id }}" class="button green">View</a>
                                <a class="button orange">Edit</a>
                                <a class="button red">Delete</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </div>
</main>
<app-modal [showModal]="newArticleModalShown" (onClose)="closeAllModals()">
    <form [formGroup]="newArticleForm" method="post">
        <input formControlName="title" type="text" placeholder="Title">
        <input formControlName="titleImage" type="file" placeholder="Title image">
        <ckeditor [editor]="newArticleEditor">
        </ckeditor>
        <input formControlName="language" type="text" placeholder="Language">
        <input class="button" type="submit" value="Submit">
    </form>
</app-modal>